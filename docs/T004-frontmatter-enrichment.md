# T004: Frontmatter Enrichment Report

**실행일**: 2026-02-21

## 버그 수정

실행 중 두 가지 파서 버그를 발견·수정:

1. **FRONTMATTER_RE 정규식** — 닫는 `---` 뒤에 `\n`이 없으면 매칭 실패 (예: `---# heading`)
   - 수정: `FRONTMATTER_LOOSE_RE` fallback 추가
2. **apply_enrichment 키 체크** — `"type" not in fm` → `not fm.get("type")` 로 변경 (falsy 값 처리)

## Before / After 비교

| 항목 | Before | After | 변화 |
|------|--------|-------|------|
| **총 노트** | 3,144 | 3,144 | — |
| **Frontmatter 있음** | 2,341 (74%) | 2,693 (85%) | **+352 (+11%p)** |
| **tags 있음** | 2,335 (74%) | 2,659 (84%) | **+324 (+10%p)** |
| **type 있음** | 2,044 (65%) | 2,187 (69%) | **+143 (+4%p)** |
| **related 있음** | 2,096 (66%) | 2,292 (72%) | **+196 (+6%p)** |
| **project 있음** | 1,290 (41%) | 1,349 (42%) | **+59 (+1%p)** |
| **aliases 있음** | 228 (7%) | 228 (7%) | — |

## 보강 실행 결과

| 단계 | 스크립트 | 적용 |
|------|---------|------|
| 1. type + project | `enrich_apply.py` | 2개 (project 추가) |
| 2. related 관계 | `enrich_related.py` | 198개 (997개 관계 추론) |
| 3. 태그 + 백링크 | `content_enrich.py` | 2개 (태그 2,235개 + 백링크 31개) |

## 그래프 빌드 결과

| 항목 | 값 |
|------|---|
| 노드 | 2,533 |
| 엣지 | 26,291 |
| Dangling 노드 | 0 |
| 연결 컴포넌트 | 167 |
| wiki_link 엣지 | 17,963 |
| related 엣지 | 8,328 |

## 잔여 갭

- type 미보유: 957개 (30%) — 대부분 frontmatter 자체가 없는 순수 콘텐츠 노트
- project 미보유: 1,795개 (57%) — 프로젝트 추론이 어려운 일반 노트
- related 미보유: 852개 (27%) — 태그/프로젝트 겹침이 부족한 고립 노트
